# glorified cd
function dir {
  export DISABLE_AUTO_TITLE="true"
  dir="$(z | awk '{print $2}' | pick -q "${1}")"      # pick from fuzzy-searchable list of most used directories
  echo -e "\033];$(basename "${dir}")\007"  # change terminal tab title
  cd "${dir}" || exit 1                     # cd into directory
}

# mnemonic to stick to reasonable commit message prefixes
# see: https://github.com/angular/angular.js/blob/master/CONTRIBUTING.md#commit
function commits {
cat << EOM
feat:  A new feature
fix:   A bug fix
docs:  Documentation-only changes
style: Changes that do not affect the meaning of the code
refa:  A code change that neither fixes a bug nor adds a feature
perf:  A code change that improves performance
test:  Adding missing tests
chore: Changes to the build process, auxiliary tools, and libraries
EOM
}

# localhost for lazy people
function lopen {
  open "http://localhost:${1}"
}

# localhost for lazy docker people
function dopen {
  # get and count all published port mappings
  published=$(docker container ps | pick | awk '{print $1}' | xargs docker container port)
  nof_published=$(wc -l <<< "${published}")

  # container has no published ports
  [[ ${nof_published} -eq 0 ]] && exit 1

  # container has exactly one published port
  [[ ${nof_published} -eq 1 ]] && port=$(echo "${published}" | grep -oE '(\d+)$')

  # container has more than one published port
  [[ ${nof_published} -gt 1 ]] && port=$(echo "${published}" | pick -q "${1}" | grep -oE '(\d+)$')

  open "http://localhost:${port}"
}
